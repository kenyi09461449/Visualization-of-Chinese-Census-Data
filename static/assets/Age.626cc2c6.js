import{s as C}from"./request.e71a236e.js";import{u as G,_ as H,a as J}from"./upload.273546f8.js";import{_ as K,b as v,s as O,c as u,o as P,e as Q,g as e,h as l,F as W,E as r,l as i,f as k,C as X}from"./index.794eb616.js";function Z(c){return C({url:"/age",method:"post",data:c})}function ee(c){return C({url:"/age",method:"delete",params:{id:c}})}function le(c){return C({url:"/age",method:"put",data:c})}function ae(c){return C({url:"/age",method:"get",params:c})}const oe={slot:"footer",class:"dialog-footer"},te={slot:"footer",class:"dialog-footer"},ne={__name:"Age",setup(c){const g=v({pageNo:1,pageSize:10,year:""}),b=v([]),w=v(0),V=v(!1),s=v({}),y=v(!1),d=v({}),m=()=>{ae(g.value).then(t=>{t.code===200?(b.value=t.data.list,w.value=t.data.total||0):r.error(t.msg)}).catch(t=>{console.log(t)})},h=()=>{g.value={pageNo:1,pageSize:10,year:""},m()},A=t=>{g.value.pageSize=t,m()},D=t=>{g.value.pageNo=t,m()},E=t=>{d.value=t,y.value=!0},B=async t=>{await X.confirm("Confirm deletion?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).catch(n=>n)==="confirm"&&ee(t).then(n=>{n.code===200?(m(),r.success("Delete success")):r.error("Delete failed")}).catch(n=>{console.log(n),r.error("Network error")})},N=()=>{Z(s.value).then(t=>{t.code===200?(m(),V.value=!1,r.success("Add success")):r.error("Add failed")})},T=()=>{le(d.value).then(t=>{t.code===200?(m(),y.value=!1,r.success("Update success")):r.error("Update failed")})},S=async t=>{const a=new FormData;a.append("file",t.file);let n=await G(a);if(n.code!==200){r.error("Import failed");return}(await H({data:"age",file:n.data})).code===200?(r.success("Import success"),m()):r.error("Import failed")},F=()=>{console.log("export"),J({data:"age"}).then(t=>{t.code===200?(window.open(t.data),r.success("Export success")):r.error("Export failed")})};return O(()=>{m()}),(t,a)=>{const n=u("el-input"),x=u("el-col"),p=u("el-button"),$=u("el-upload"),z=u("el-row"),L=u("el-header"),f=u("el-table-column"),R=u("el-table"),Y=u("el-main"),M=u("el-pagination"),j=u("el-container"),_=u("el-form-item"),U=u("el-form"),I=u("el-dialog");return P(),Q(W,null,[e(j,{class:"el-container-fix"},{default:l(()=>[e(L,null,{default:l(()=>[e(z,{gutter:20,justify:"flex-start"},{default:l(()=>[e(x,{span:4},{default:l(()=>[e(n,{modelValue:g.value.year,"onUpdate:modelValue":a[0]||(a[0]=o=>g.value.year=o),placeholder:"Year"},null,8,["modelValue"])]),_:1}),e(x,{span:4},{default:l(()=>[e(p,{type:"primary",onClick:m},{default:l(()=>[i(" Search ")]),_:1}),e(p,{type:"info",onClick:h},{default:l(()=>[i(" Reset ")]),_:1}),e(p,{type:"primary",plain:"",onClick:a[1]||(a[1]=o=>V.value=!0)},{default:l(()=>[i(" Create ")]),_:1})]),_:1}),e(x,{span:1.5},{default:l(()=>[e($,{ref:"uploadRef",class:"upload-demo","show-file-list":!1,"http-request":S},{trigger:l(()=>[e(p,{type:"success"},{default:l(()=>[i("Import")]),_:1})]),_:1},512)]),_:1},8,["span"]),e(x,{span:2},{default:l(()=>[e(p,{type:"warning",onClick:F},{default:l(()=>[i("Export")]),_:1})]),_:1})]),_:1})]),_:1}),e(Y,null,{default:l(()=>[e(R,{data:b.value,height:"650",ref:"filterTable",border:!0,stripe:""},{default:l(()=>[e(f,{prop:"id",label:"id",width:"80"}),e(f,{prop:"year",label:"Year"}),e(f,{prop:"total",label:"Total"}),e(f,{prop:"age_0_14",label:"age_0_14"}),e(f,{prop:"age_15_64",label:"age_15_64"}),e(f,{prop:"age_65_up",label:"age_65_up"}),e(f,{label:"Action",width:"300"},{default:l(o=>[e(p,{type:"warning",size:"small",icon:"Edit",onClick:q=>E(o.row)},{default:l(()=>[i("Edit ")]),_:2},1032,["onClick"]),e(p,{size:"small",type:"danger",icon:"Delete",onClick:q=>B(o.row.id)},{default:l(()=>[i("Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(z,null,{default:l(()=>[e(M,{onSizeChange:A,onCurrentChange:D,"current-page":g.value.pageNo,"page-sizes":[10,20,50,100],"page-size":g.value.pageSize,total:w.value,layout:"total,prev, pager, next,jumper"},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),e(I,{title:"Add",modelValue:V.value,"onUpdate:modelValue":a[8]||(a[8]=o=>V.value=o),width:"30%"},{default:l(()=>[e(U,{model:s.value},{default:l(()=>[e(_,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:s.value.year,"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.year=o),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"total"},{default:l(()=>[e(n,{modelValue:s.value.total,"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.total=o),size:"large",placeholder:"Total",name:"total",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"age_0_14"},{default:l(()=>[e(n,{modelValue:s.value.age_0_14,"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.age_0_14=o),size:"large",placeholder:"Age 0-14",name:"age_0_14",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"age_15_64"},{default:l(()=>[e(n,{modelValue:s.value.age_15_64,"onUpdate:modelValue":a[5]||(a[5]=o=>s.value.age_15_64=o),size:"large",placeholder:"Age 15-64",name:"age_15_64",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"age_65_up"},{default:l(()=>[e(n,{modelValue:s.value.age_65_up,"onUpdate:modelValue":a[6]||(a[6]=o=>s.value.age_65_up=o),size:"large",placeholder:"Age 65 up",name:"age_65_up",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),k("span",oe,[e(p,{onClick:a[7]||(a[7]=o=>V.value=!1)},{default:l(()=>[i("Cancel")]),_:1}),e(p,{type:"primary",onClick:N},{default:l(()=>[i("Confirm")]),_:1})])]),_:1},8,["modelValue"]),e(I,{title:"Edit",modelValue:y.value,"onUpdate:modelValue":a[15]||(a[15]=o=>y.value=o),width:"30%"},{default:l(()=>[e(U,{model:d.value},{default:l(()=>[e(_,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:d.value.year,"onUpdate:modelValue":a[9]||(a[9]=o=>d.value.year=o),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"total"},{default:l(()=>[e(n,{modelValue:d.value.total,"onUpdate:modelValue":a[10]||(a[10]=o=>d.value.total=o),size:"large",placeholder:"Total",name:"total",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"age_0_14"},{default:l(()=>[e(n,{modelValue:d.value.age_0_14,"onUpdate:modelValue":a[11]||(a[11]=o=>d.value.age_0_14=o),size:"large",placeholder:"Age 0-14",name:"age_0_14",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"age_15_64"},{default:l(()=>[e(n,{modelValue:d.value.age_15_64,"onUpdate:modelValue":a[12]||(a[12]=o=>d.value.age_15_64=o),size:"large",placeholder:"Age 15-64",name:"age_15_64",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"age_65_up"},{default:l(()=>[e(n,{modelValue:d.value.age_65_up,"onUpdate:modelValue":a[13]||(a[13]=o=>d.value.age_65_up=o),size:"large",placeholder:"Age 65 up",name:"age_65_up",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),k("span",te,[e(p,{onClick:a[14]||(a[14]=o=>y.value=!1)},{default:l(()=>[i("Cancel")]),_:1}),e(p,{type:"primary",onClick:T},{default:l(()=>[i("Confirm")]),_:1})])]),_:1},8,["modelValue"])],64)}}},se=K(ne,[["__scopeId","data-v-4c30aedc"]]);export{se as default};
