import{_ as P,u as T,a as C,r as z,b as h,c as s,d as B,o as b,e as w,w as O,n as q,f as a,g as o,h as t,F as M,i as Y,j as y,k as L,l as S,p as j,m as G,E as k}from"./index.794eb616.js";import{_ as H}from"./bg.79b7f3df.js";import{u as J}from"./user.f7bb43e6.js";import"./request.e71a236e.js";const _=i=>(j("data-v-316429be"),i=i(),G(),i),Q=Y('<video src="'+H+'" class="bg-video" muted loop autoplay data-v-316429be></video><div class="left-title" data-v-316429be><h1 class="main-title" data-v-316429be>POPULATION DATA ANALYSIS</h1><h3 class="main-desc" data-v-316429be><a href="https://data.stats.gov.cn/" data-v-316429be>Data from https://data.stats.gov.cn/</a></h3></div>',2),W={class:"left-right"},X=_(()=>a("div",{class:"title-container"},[a("h3",{class:"app-title"},"Login")],-1)),Z={class:"more-options"},$={class:"more-options-left"},ee=_(()=>a("div",{class:"no-account-tips"},"Not a user?",-1)),oe=_(()=>a("div",{class:"more-options-right"},null,-1)),te={__name:"Login",setup(i){const x=T(),m=C(),r=z({username:"",password:""}),F=(n,e,l)=>{e?l():l(new Error("Please enter your username"))},V=(n,e,l)=>{e.length<6?l(new Error("The password can not be less than 6 digits")):l()},f=h(null),I=n=>{f.value.validate(e=>{e?n():console.log("error submit!!")})},U={username:[{required:!0,trigger:"blur",validator:F}],password:[{required:!0,trigger:"blur",validator:V}]},c=h(!1);new Date().getFullYear();const d=()=>{I(()=>{c.value=!0;let n={...r};J(n).then(e=>{c.value=!1,e.code===200?(x.commit("SET_USERINFO",e.data),k.success("Login successful!"),e.data.role===0?m.push({name:"UserList"}):m.push({name:"home"})):k.error(e.msg)}).catch(e=>{console.error(e),c.value=!1})})};return(n,e)=>{const l=s("User"),g=s("el-icon"),v=s("el-input"),u=s("el-form-item"),E=s("Lock"),N=s("el-button"),R=s("el-link"),A=s("el-form"),D=s("Footer"),K=B("loading");return b(),w(M,null,[O((b(),w("div",{"element-loading-text":"loading","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)",class:"login-container",style:q(n.bg)},[Q,a("div",W,[o(A,{ref_key:"loginFormRef",ref:f,model:r,rules:U,class:"login-form","auto-complete":"on","label-position":"left"},{default:t(()=>[X,o(u,{prop:"username"},{default:t(()=>[o(v,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=p=>r.username=p),placeholder:"Email / Username",size:"large",tabIndex:"-1"},{prefix:t(()=>[o(g,{class:"el-input__icon"},{default:t(()=>[o(l)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,{prop:"password"},{default:t(()=>[o(v,{ref:"password",modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=p=>r.password=p),size:"large","show-password":"",placeholder:"Password",name:"password",tabIndex:"-1","auto-complete":"on",onKeyup:y(d,["enter"])},{prefix:t(()=>[o(g,{class:"el-input__icon"},{default:t(()=>[o(E)]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),o(u,null,{default:t(()=>[o(N,{type:"primary",class:"login-btn",onClick:L(d,["prevent"]),onKeyup:y(L(d,["prevent"]),["enter"])},{default:t(()=>[S(" Sign in ")]),_:1},8,["onClick","onKeyup"])]),_:1}),a("div",Z,[a("div",$,[ee,a("div",null,[o(R,{underline:!1,type:"primary",href:"#/register"},{default:t(()=>[S("Register")]),_:1})])]),oe])]),_:1},8,["model"])])],4)),[[K,c.value,void 0,{fullscreen:!0,lock:!0}]]),o(D,{class:"footer"})],64)}}},re=P(te,[["__scopeId","data-v-316429be"]]);export{re as default};
