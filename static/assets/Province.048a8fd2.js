import{s as b}from"./request.e71a236e.js";import{u as q,_ as j,a as H}from"./upload.273546f8.js";import{_ as J,b as _,s as K,c as r,o as O,e as Q,g as e,h as l,F as W,E as d,l as u,f as D,C as X,D as Z}from"./index.794eb616.js";function ee(c){return b({url:"/province",method:"post",data:c})}function le(c){return b({url:"/province",method:"delete",params:{id:c}})}function oe(c){return b({url:"/province",method:"put",data:c})}function ae(c){return b({url:"/province",method:"get",params:c})}const te={slot:"footer",class:"dialog-footer"},ne={slot:"footer",class:"dialog-footer"},re={__name:"Province",setup(c){const m=_({pageNo:1,pageSize:10,year:""}),h=_([]),x=_(0),y=_(!1),f=_({}),V=_(!1),i=_({}),p=()=>{ae(m.value).then(a=>{a.code===200?(h.value=a.data.list,x.value=a.data.total||0):d.error(a.msg)}).catch(a=>{console.log(a)})},I=()=>{m.value={pageNo:1,pageSize:10,year:""},p()},U=a=>{m.value.pageSize=a,p()},E=a=>{m.value.pageNo=a,p()},B=a=>{i.value=a,V.value=!0},N=async a=>{await X.confirm("Confirm deletion?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).catch(n=>n)==="confirm"&&le(a).then(n=>{n.code===200?(p(),d.success("Delete success")):d.error("Delete failed")}).catch(n=>{console.log(n),d.error("Network error")})},S=()=>{ee(f.value).then(a=>{a.code===200?(p(),y.value=!1,d.success("Add success")):d.error("Add failed")})},P=()=>{oe(i.value).then(a=>{a.code===200?(p(),V.value=!1,d.success("Update success")):d.error("Update failed")})},A=async a=>{const o=new FormData;o.append("file",a.file);let n=await q(o);if(n.code!==200){d.error("Import failed");return}const v=Z.service({lock:!0,text:"Import data...",background:"rgba(0, 0, 0, 0.7)"});(await j({data:"province",file:n.data})).code===200?(d.success("Import success"),p()):d.error("Import failed"),v.close()},F=()=>{console.log("export"),H({data:"province"}).then(a=>{a.code===200?(window.open(a.data),d.success("Export success")):d.error("Export failed")})};return K(()=>{p()}),(a,o)=>{const n=r("el-input"),v=r("el-col"),s=r("el-button"),L=r("el-upload"),w=r("el-row"),T=r("el-header"),C=r("el-table-column"),$=r("el-table"),R=r("el-main"),Y=r("el-pagination"),G=r("el-container"),g=r("el-form-item"),k=r("el-form"),z=r("el-dialog");return O(),Q(W,null,[e(G,{class:"el-container-fix"},{default:l(()=>[e(T,null,{default:l(()=>[e(w,{gutter:20},{default:l(()=>[e(v,{span:4},{default:l(()=>[e(n,{modelValue:m.value.year,"onUpdate:modelValue":o[0]||(o[0]=t=>m.value.year=t),placeholder:"Year"},null,8,["modelValue"])]),_:1}),e(v,{span:4},{default:l(()=>[e(s,{type:"primary",onClick:p},{default:l(()=>[u(" Search ")]),_:1}),e(s,{type:"info",onClick:I},{default:l(()=>[u(" Reset ")]),_:1}),e(s,{type:"primary",plain:"",onClick:o[1]||(o[1]=t=>y.value=!0)},{default:l(()=>[u(" Create ")]),_:1})]),_:1}),e(v,{span:1.5},{default:l(()=>[e(L,{ref:"uploadRef",class:"upload-demo","show-file-list":!1,"http-request":A},{trigger:l(()=>[e(s,{type:"success"},{default:l(()=>[u("Import")]),_:1})]),_:1},512)]),_:1},8,["span"]),e(v,{span:2},{default:l(()=>[e(s,{type:"warning",onClick:F},{default:l(()=>[u("Export")]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:l(()=>[e($,{data:h.value,height:"650",ref:"filterTable",border:!0,stripe:""},{default:l(()=>[e(C,{prop:"id",label:"id",width:"80"}),e(C,{prop:"year",label:"Year"}),e(C,{prop:"province",label:"Province"}),e(C,{prop:"total",label:"Gdp"}),e(C,{label:"Action",width:"300"},{default:l(t=>[e(s,{type:"warning",size:"small",icon:"Edit",onClick:M=>B(t.row)},{default:l(()=>[u("Edit ")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"danger",icon:"Delete",onClick:M=>N(t.row.id)},{default:l(()=>[u("Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(w,null,{default:l(()=>[e(Y,{onSizeChange:U,onCurrentChange:E,"current-page":m.value.pageNo,"page-sizes":[10,20,50,100],"page-size":m.value.pageSize,total:x.value,layout:"total,prev, pager, next,jumper"},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),e(z,{title:"Add",modelValue:y.value,"onUpdate:modelValue":o[6]||(o[6]=t=>y.value=t),width:"30%"},{default:l(()=>[e(k,{model:f.value},{default:l(()=>[e(g,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:f.value.year,"onUpdate:modelValue":o[2]||(o[2]=t=>f.value.year=t),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(g,{prop:"birth"},{default:l(()=>[e(n,{modelValue:f.value.province,"onUpdate:modelValue":o[3]||(o[3]=t=>f.value.province=t),size:"large",placeholder:"Province",name:"birth",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(g,{prop:"death"},{default:l(()=>[e(n,{modelValue:f.value.total,"onUpdate:modelValue":o[4]||(o[4]=t=>f.value.total=t),size:"large",placeholder:"Gdp",name:"death",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),D("span",te,[e(s,{onClick:o[5]||(o[5]=t=>y.value=!1)},{default:l(()=>[u("Cancel")]),_:1}),e(s,{type:"primary",onClick:S},{default:l(()=>[u("Confirm")]),_:1})])]),_:1},8,["modelValue"]),e(z,{title:"Edit",modelValue:V.value,"onUpdate:modelValue":o[11]||(o[11]=t=>V.value=t),width:"30%"},{default:l(()=>[e(k,{model:i.value},{default:l(()=>[e(g,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:i.value.year,"onUpdate:modelValue":o[7]||(o[7]=t=>i.value.year=t),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(g,{prop:"birth"},{default:l(()=>[e(n,{modelValue:i.value.province,"onUpdate:modelValue":o[8]||(o[8]=t=>i.value.province=t),size:"large",placeholder:"Province",name:"birth",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(g,{prop:"death"},{default:l(()=>[e(n,{modelValue:i.value.total,"onUpdate:modelValue":o[9]||(o[9]=t=>i.value.total=t),size:"large",placeholder:"Gdp",name:"death",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),D("span",ne,[e(s,{onClick:o[10]||(o[10]=t=>V.value=!1)},{default:l(()=>[u("Cancel")]),_:1}),e(s,{type:"primary",onClick:P},{default:l(()=>[u("Confirm")]),_:1})])]),_:1},8,["modelValue"])],64)}}},ie=J(re,[["__scopeId","data-v-ec1d111d"]]);export{ie as default};
