import{s as b}from"./request.e71a236e.js";import{u as q,_ as j,a as H}from"./upload.273546f8.js";import{_ as J,b as _,s as K,c as r,o as O,e as Q,g as e,h as l,F as W,E as d,l as u,f as D,C as X,D as Z}from"./index.794eb616.js";function ee(c){return b({url:"/gdp",method:"post",data:c})}function le(c){return b({url:"/gdp",method:"delete",params:{id:c}})}function ae(c){return b({url:"/gdp",method:"put",data:c})}function te(c){return b({url:"/gdp",method:"get",params:c})}const oe={slot:"footer",class:"dialog-footer"},ne={slot:"footer",class:"dialog-footer"},re={__name:"Gdp",setup(c){const m=_({pageNo:1,pageSize:10,year:""}),h=_([]),x=_(0),y=_(!1),f=_({}),V=_(!1),p=_({}),i=()=>{te(m.value).then(t=>{t.code===200?(h.value=t.data.list,x.value=t.data.total||0):d.error(t.msg)}).catch(t=>{console.log(t)})},I=()=>{m.value={pageNo:1,pageSize:10,year:""},i()},U=t=>{m.value.pageSize=t,i()},E=t=>{m.value.pageNo=t,i()},B=t=>{p.value=t,V.value=!0},N=async t=>{await X.confirm("Confirm deletion?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).catch(n=>n)==="confirm"&&le(t).then(n=>{n.code===200?(i(),d.success("Delete success")):d.error("Delete failed")}).catch(n=>{console.log(n),d.error("Network error")})},S=()=>{ee(f.value).then(t=>{t.code===200?(i(),y.value=!1,d.success("Add success")):d.error("Add failed")})},G=()=>{ae(p.value).then(t=>{t.code===200?(i(),V.value=!1,d.success("Update success")):d.error("Update failed")})},A=async t=>{const a=new FormData;a.append("file",t.file);let n=await q(a);if(n.code!==200){d.error("Import failed");return}const g=Z.service({lock:!0,text:"Import data...",background:"rgba(0, 0, 0, 0.7)"});(await j({data:"gdp",file:n.data})).code===200?(d.success("Import success"),i()):d.error("Import failed"),g.close()},F=()=>{console.log("export"),H({data:"gdp"}).then(t=>{t.code===200?(window.open(t.data),d.success("Export success")):d.error("Export failed")})};return K(()=>{i()}),(t,a)=>{const n=r("el-input"),g=r("el-col"),s=r("el-button"),L=r("el-upload"),w=r("el-row"),T=r("el-header"),C=r("el-table-column"),$=r("el-table"),R=r("el-main"),Y=r("el-pagination"),M=r("el-container"),v=r("el-form-item"),k=r("el-form"),z=r("el-dialog");return O(),Q(W,null,[e(M,{class:"el-container-fix"},{default:l(()=>[e(T,null,{default:l(()=>[e(w,{gutter:20},{default:l(()=>[e(g,{span:4},{default:l(()=>[e(n,{modelValue:m.value.year,"onUpdate:modelValue":a[0]||(a[0]=o=>m.value.year=o),placeholder:"Year"},null,8,["modelValue"])]),_:1}),e(g,{span:4},{default:l(()=>[e(s,{type:"primary",onClick:i},{default:l(()=>[u(" Search ")]),_:1}),e(s,{type:"info",onClick:I},{default:l(()=>[u(" Reset ")]),_:1}),e(s,{type:"primary",plain:"",onClick:a[1]||(a[1]=o=>y.value=!0)},{default:l(()=>[u(" Create ")]),_:1})]),_:1}),e(g,{span:1.5},{default:l(()=>[e(L,{ref:"uploadRef",class:"upload-demo","show-file-list":!1,"http-request":A},{trigger:l(()=>[e(s,{type:"success"},{default:l(()=>[u("Import")]),_:1})]),_:1},512)]),_:1},8,["span"]),e(g,{span:2},{default:l(()=>[e(s,{type:"warning",onClick:F},{default:l(()=>[u("Export")]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:l(()=>[e($,{data:h.value,height:"650",ref:"filterTable",border:!0,stripe:""},{default:l(()=>[e(C,{prop:"id",label:"id",width:"80"}),e(C,{prop:"year",label:"Year"}),e(C,{prop:"province",label:"Province"}),e(C,{prop:"gdp",label:"Gdp"}),e(C,{label:"Action",width:"300"},{default:l(o=>[e(s,{type:"warning",size:"small",icon:"Edit",onClick:P=>B(o.row)},{default:l(()=>[u("Edit ")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"danger",icon:"Delete",onClick:P=>N(o.row.id)},{default:l(()=>[u("Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(w,null,{default:l(()=>[e(Y,{onSizeChange:U,onCurrentChange:E,"current-page":m.value.pageNo,"page-sizes":[10,20,50,100],"page-size":m.value.pageSize,total:x.value,layout:"total,prev, pager, next,jumper"},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),e(z,{title:"Add",modelValue:y.value,"onUpdate:modelValue":a[6]||(a[6]=o=>y.value=o),width:"30%"},{default:l(()=>[e(k,{model:f.value},{default:l(()=>[e(v,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:f.value.year,"onUpdate:modelValue":a[2]||(a[2]=o=>f.value.year=o),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(v,{prop:"birth"},{default:l(()=>[e(n,{modelValue:f.value.province,"onUpdate:modelValue":a[3]||(a[3]=o=>f.value.province=o),size:"large",placeholder:"Province",name:"birth",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(v,{prop:"death"},{default:l(()=>[e(n,{modelValue:f.value.gdp,"onUpdate:modelValue":a[4]||(a[4]=o=>f.value.gdp=o),size:"large",placeholder:"Gdp",name:"death",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),D("span",oe,[e(s,{onClick:a[5]||(a[5]=o=>y.value=!1)},{default:l(()=>[u("Cancel")]),_:1}),e(s,{type:"primary",onClick:S},{default:l(()=>[u("Confirm")]),_:1})])]),_:1},8,["modelValue"]),e(z,{title:"Edit",modelValue:V.value,"onUpdate:modelValue":a[11]||(a[11]=o=>V.value=o),width:"30%"},{default:l(()=>[e(k,{model:p.value},{default:l(()=>[e(v,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:p.value.year,"onUpdate:modelValue":a[7]||(a[7]=o=>p.value.year=o),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(v,{prop:"birth"},{default:l(()=>[e(n,{modelValue:p.value.province,"onUpdate:modelValue":a[8]||(a[8]=o=>p.value.province=o),size:"large",placeholder:"Province",name:"birth",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(v,{prop:"death"},{default:l(()=>[e(n,{modelValue:p.value.gdp,"onUpdate:modelValue":a[9]||(a[9]=o=>p.value.gdp=o),size:"large",placeholder:"Gdp",name:"death",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),D("span",ne,[e(s,{onClick:a[10]||(a[10]=o=>V.value=!1)},{default:l(()=>[u("Cancel")]),_:1}),e(s,{type:"primary",onClick:G},{default:l(()=>[u("Confirm")]),_:1})])]),_:1},8,["modelValue"])],64)}}},pe=J(re,[["__scopeId","data-v-659f2d22"]]);export{pe as default};
