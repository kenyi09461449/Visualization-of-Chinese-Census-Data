import{s as y}from"./request.e71a236e.js";import{u as G,_ as H,a as J}from"./upload.273546f8.js";import{_ as K,b as v,s as O,c as r,o as P,e as Q,g as e,h as l,F as W,E as u,l as i,f as k,C as X}from"./index.794eb616.js";function Z(c){return y({url:"/birth",method:"post",data:c})}function ee(c){return y({url:"/birth",method:"delete",params:{id:c}})}function le(c){return y({url:"/birth",method:"put",data:c})}function te(c){return y({url:"/birth",method:"get",params:c})}const ae={slot:"footer",class:"dialog-footer"},oe={slot:"footer",class:"dialog-footer"},ne={__name:"Birth",setup(c){const f=v({pageNo:1,pageSize:10,year:""}),C=v([]),x=v(0),h=v(!1),p=v({}),b=v(!1),d=v({}),m=()=>{te(f.value).then(o=>{o.code===200?(C.value=o.data.list,x.value=o.data.total||0):u.error(o.msg)}).catch(o=>{console.log(o)})},D=()=>{f.value={pageNo:1,pageSize:10,year:""},m()},I=o=>{f.value.pageSize=o,m()},B=o=>{f.value.pageNo=o,m()},E=o=>{d.value=o,b.value=!0},R=async o=>{await X.confirm("Confirm deletion?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).catch(n=>n)==="confirm"&&ee(o).then(n=>{n.code===200?(m(),u.success("Delete success")):u.error("Delete failed")}).catch(n=>{console.log(n),u.error("Network error")})},N=()=>{Z(p.value).then(o=>{o.code===200?(m(),h.value=!1,u.success("Add success")):u.error("Add failed")})},S=()=>{le(d.value).then(o=>{o.code===200?(m(),b.value=!1,u.success("Update success")):u.error("Update failed")})},A=async o=>{const t=new FormData;t.append("file",o.file);let n=await G(t);if(n.code!==200){u.error("Import failed");return}(await H({data:"birth",file:n.data})).code===200?(u.success("Import success"),m()):u.error("Import failed")},F=()=>{console.log("export"),J({data:"birth"}).then(o=>{o.code===200?(window.open(o.data),u.success("Export success")):u.error("Export failed")})};return O(()=>{m()}),(o,t)=>{const n=r("el-input"),V=r("el-col"),s=r("el-button"),T=r("el-upload"),w=r("el-row"),$=r("el-header"),g=r("el-table-column"),L=r("el-table"),Y=r("el-main"),M=r("el-pagination"),q=r("el-container"),_=r("el-form-item"),z=r("el-form"),U=r("el-dialog");return P(),Q(W,null,[e(q,{class:"el-container-fix"},{default:l(()=>[e($,null,{default:l(()=>[e(w,{gutter:20},{default:l(()=>[e(V,{span:4},{default:l(()=>[e(n,{modelValue:f.value.year,"onUpdate:modelValue":t[0]||(t[0]=a=>f.value.year=a),placeholder:"Year"},null,8,["modelValue"])]),_:1}),e(V,{span:4},{default:l(()=>[e(s,{type:"primary",onClick:m},{default:l(()=>[i(" Search ")]),_:1}),e(s,{type:"info",onClick:D},{default:l(()=>[i(" Reset ")]),_:1}),e(s,{type:"primary",plain:"",onClick:t[1]||(t[1]=a=>h.value=!0)},{default:l(()=>[i(" Create ")]),_:1})]),_:1}),e(V,{span:1.5},{default:l(()=>[e(T,{ref:"uploadRef",class:"upload-demo","show-file-list":!1,"http-request":A},{trigger:l(()=>[e(s,{type:"success"},{default:l(()=>[i("Import")]),_:1})]),_:1},512)]),_:1},8,["span"]),e(V,{span:2},{default:l(()=>[e(s,{type:"warning",onClick:F},{default:l(()=>[i("Export")]),_:1})]),_:1})]),_:1})]),_:1}),e(Y,null,{default:l(()=>[e(L,{data:C.value,height:"650",ref:"filterTable",border:!0,stripe:""},{default:l(()=>[e(g,{prop:"id",label:"id",width:"80"}),e(g,{prop:"year",label:"Year"}),e(g,{prop:"birth",label:"birth rate"}),e(g,{prop:"death",label:"death rate"}),e(g,{prop:"up",label:"up rate"}),e(g,{label:"Action",width:"300"},{default:l(a=>[e(s,{type:"warning",size:"small",icon:"Edit",onClick:j=>E(a.row)},{default:l(()=>[i("Edit ")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"danger",icon:"Delete",onClick:j=>R(a.row.id)},{default:l(()=>[i("Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(w,null,{default:l(()=>[e(M,{onSizeChange:I,onCurrentChange:B,"current-page":f.value.pageNo,"page-sizes":[10,20,50,100],"page-size":f.value.pageSize,total:x.value,layout:"total,prev, pager, next,jumper"},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),e(U,{title:"Add",modelValue:h.value,"onUpdate:modelValue":t[7]||(t[7]=a=>h.value=a),width:"30%"},{default:l(()=>[e(z,{model:p.value},{default:l(()=>[e(_,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:p.value.year,"onUpdate:modelValue":t[2]||(t[2]=a=>p.value.year=a),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"birth"},{default:l(()=>[e(n,{modelValue:p.value.birth,"onUpdate:modelValue":t[3]||(t[3]=a=>p.value.birth=a),size:"large",placeholder:"Birth Rate",name:"birth",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"death"},{default:l(()=>[e(n,{modelValue:p.value.death,"onUpdate:modelValue":t[4]||(t[4]=a=>p.value.death=a),size:"large",placeholder:"Death Rate",name:"death",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"up"},{default:l(()=>[e(n,{modelValue:p.value.up,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value.up=a),size:"large",placeholder:"Up Rate",name:"up",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),k("span",ae,[e(s,{onClick:t[6]||(t[6]=a=>h.value=!1)},{default:l(()=>[i("Cancel")]),_:1}),e(s,{type:"primary",onClick:N},{default:l(()=>[i("Confirm")]),_:1})])]),_:1},8,["modelValue"]),e(U,{title:"Edit",modelValue:b.value,"onUpdate:modelValue":t[13]||(t[13]=a=>b.value=a),width:"30%"},{default:l(()=>[e(z,{model:d.value},{default:l(()=>[e(_,{prop:"year"},{default:l(()=>[e(n,{ref:"year",modelValue:d.value.year,"onUpdate:modelValue":t[8]||(t[8]=a=>d.value.year=a),size:"large",placeholder:"Year",name:"year",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"birth"},{default:l(()=>[e(n,{modelValue:d.value.birth,"onUpdate:modelValue":t[9]||(t[9]=a=>d.value.birth=a),size:"large",placeholder:"Birth Rate",name:"birth",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"death"},{default:l(()=>[e(n,{modelValue:d.value.death,"onUpdate:modelValue":t[10]||(t[10]=a=>d.value.death=a),size:"large",placeholder:"Death Rate",name:"death",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),e(_,{prop:"up"},{default:l(()=>[e(n,{modelValue:d.value.up,"onUpdate:modelValue":t[11]||(t[11]=a=>d.value.up=a),size:"large",placeholder:"Up Rate",name:"up",tabIndex:"-1","auto-complete":"on"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),k("span",oe,[e(s,{onClick:t[12]||(t[12]=a=>b.value=!1)},{default:l(()=>[i("Cancel")]),_:1}),e(s,{type:"primary",onClick:S},{default:l(()=>[i("Confirm")]),_:1})])]),_:1},8,["modelValue"])],64)}}},se=K(ne,[["__scopeId","data-v-ad39a33f"]]);export{se as default};
